#!/usr/local/bin/zsh -f

wifi_quality() {
   }

if [ $(uname) = 'Darwin' ]; then 
	adapter="en0"
	os=0
	airportPath="/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport"
else
	adapter="wlan0"
	os=1
fi

if [ $(ifconfig $adapter | grep UP | wc -l) -eq 1 ]; then
  if [ os -gt 0 ]; then
#    linux  
    _linkQual="`iwconfig $_adapter_id | grep Quality | cut -d'=' -f2 | cut -d' ' -f1 | cut -d'/' -f1`" 
  else
#   osx  
    _linkQual="$($airportPath -I | grep -E CtlRSSI | cut -d'-' -f2)" 
  fi
  if [ $_linkQual -gt 52 ]; then # >75% link qual  
    _linkSparked=$(spark 1 2 3 4)
  elif [ $_linkQual -gt 35 ]; then # >50% link qual
    _linkSparked=$(spark 1 2 3 0)
  elif [ $_linkQual -gt 17 ]; then # 25% link qual
    _linkSparked=$(spark 1 2 0 0)
  elif [ $_linkQual -gt 7 ]; then # 25% link qual
    _linkSparked=$(spark 1 0 0 0)
  else # < 25%
    _linkSparked=$(spark 0 0 0 0)
  fi

  echo $_linkSparked
fi
